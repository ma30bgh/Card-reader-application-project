{% extends 'web/base.html' %}


{% block body %}

    <section class="basic-elements">
        <div class="row"  style="text-align: center">
            <div class="col-sm-12">
                <h2 class="content-header" >فرم افزودن اطلاعات</h2>
            </div>
        </div>
        <div class="row" style="direction: rtl">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title-wrap bar-success">
                            <h4 class="card-title mb-0">اطلاعات خود را وارد نمایید</h4>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="px-3">
                            <div class="form">
                                <div class="form-body">
                                    <div class="row">
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="name">نام </label>
                                                <input type="text" class="form-control" id="name" value="{{ loginData.name }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="family">نام خانوادگی </label>
                                                {% comment %} <small class="text-muted"><i>info@bugeto.net</i></small>{% endcomment %}
                                                <input type="text" class="form-control" id="family" value="{{ loginData.family }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="fatherName">نام پدر </label>
                                                {% comment %} <small class="text-muted"><i>info@bugeto.net</i></small>{% endcomment %}
                                                <input type="text" class="form-control" id="fatherName" value="{{ loginData.fatherName }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="birthday">تاریخ تولد </label>
                                                <input type="text" class="form-control" id="birthday" value="{{ loginData.birthday }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="codeMeli">کدملی </label>
                                                <input type="text" class="form-control" id="codeMeli" value="{{ codeMeli }}" disabled>
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="serialMeli">سریال پشت کارت ملی </label>
                                                <input type="text" class="form-control" id="serialMeli" value="{{ loginData.serialMeli }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="shomareSh">شماره شناسنامه / کد ثبتی </label>
                                                <input type="text" class="form-control" id="shomareSh" value="{{ loginData.shomareSh }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="serialSh">سریال شناسنامه </label>
                                                <input type="text" class="form-control" id="serialSh" value="{{ loginData.serialSh }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="seriSh">سری شناسنامه </label>
                                                <input type="text" class="form-control" id="seriSh" value="{{ loginData.seriSh }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="sadereh">صادره از / ثبت شده در </label>
                                                <input type="text" class="form-control" id="sadereh" value="{{ loginData.sadereh }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="ostan">استان </label>
                                                <input type="text" class="form-control" id="ostan" value="{{ loginData.ostan }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="shahr">شهر </label>
                                                <input type="text" class="form-control" id="shahr" value="{{ loginData.shahr }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="neshaniShop">نشانی فروشگاه / شرکت </label>
                                                <input type="text" class="form-control" id="neshaniShop" value="{{ loginData.neshaniShop }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="codePosti">کد پستی مکان نصب کارتخوان </label>
                                                <input type="text" class="form-control" id="codePosti" value="{{ loginData.codePosti }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="telephonShop">تلفن فروشگاه </label>
                                                <input type="text" class="form-control" id="telephonShop" value="{{ loginData.telephonShop }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="shomareParvane">شماره پروانه کسب /شماره صنفی اجاره نامه </label>
                                                <input type="text" class="form-control" id="shomareParvane" value="{{ loginData.shomareParvane }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="codeRehgiri">کد رهگیری مالیاتی </label>
                                                <input type="text" class="form-control" id="codeRehgiri" value="{{ loginData.codeRehgiri }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="senf">صنف </label>
                                                <input type="text" class="form-control" id="senf" value="{{ loginData.senf }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="teleHamrah">تلفن همراه </label>
                                                <input type="text" class="form-control" id="teleHamrah" value="{{ loginData.teleHamrah }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="bestareErtebat">بستر ارتباطی</label>
                                                <select class="form-control" id="bestareErtebat" name="bestareErtebat" >
                                                    {% for key , value in bestarType %}

                                                        <option value="{{ key }}" {% if loginData.bestareErtebat == value %}selected{% endif %}>
                                                            {{ value }}
                                                        </option>
                                                    {% endfor %}

                                                </select>


                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="malekiyat">نوع مالکیت محل فعالیت</label>
                                                <select class="form-control" id="malekiyat" name="malekiyat">
                                                    {% for key , value in malekType %}

                                                        <option value="{{ key }}" {% if loginData.malekiyat == value %}selected{% endif %}>
                                                            {{ value }}
                                                        </option>
                                                    {% endfor %}

                                                </select>


                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="mohlateEjareFrom">مهلت اجاره نامه از تاریخ </label>
                                                <input type="text" class="form-control" id="mohlateEjareFrom" value="{{ loginData.mohlateEjareFrom }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="mohlateEjareTo">مهلت اجاره نامه تا تاریخ </label>
                                                <input type="text" class="form-control" id="mohlateEjareTo" value="{{ loginData.mohlateEjareTo }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="nameMoaref">نام معرف اول </label>
                                                <input type="text" class="form-control" id="nameMoaref" value="{{ loginData.nameMoaref }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="familyMoaref">نام خانوادگی معرف اول </label>
                                                <input type="text" class="form-control" id="familyMoaref" value="{{ loginData.familyMoaref }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="telMoaref">تلفن همراه معرف اول </label>
                                                <input type="text" class="form-control" id="telMoaref" value="{{ loginData.telMoaref }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="neshaniMoaref">نشانی محل سکونت معرف اول </label>
                                                <input type="text" class="form-control" id="neshaniMoaref" value="{{ loginData.neshaniMoaref }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="shomareHesab">شماره حساب اول </label>
                                                <input type="text" class="form-control" id="shomareHesab" value="{{ loginData.shomareHesab }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="nameBank">نام بانک اول </label>
                                                <input type="text" class="form-control" id="nameBank" value="{{ loginData.nameBank }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="shomareShaba">شماره شبا اول </label>
                                                <input type="text" class="form-control" id="shomareShaba" value="{{ loginData.shomareShaba }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="shomareHesabTow">شماره حساب دوم </label>
                                                <input type="text" class="form-control" id="shomareHesabTow" value="{{ loginData.shomareHesabTow }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="nameBankTwo">نام بانک دوم </label>
                                                <input type="text" class="form-control" id="nameBankTwo" value="{{ loginData.nameBankTwo }}">
                                            </fieldset>
                                        </div>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="shomareShabaTwo">شماره شبا دوم </label>
                                                <input type="text" class="form-control" id="shomareShabaTwo" value="{{ loginData.shomareShabaTwo }}">
                                            </fieldset>
                                        </div>

                                        <hr>
                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="paziresh">تمامی حساب های اعلامی بایدفقط به نام شخص یا اشخاص پذیرنده باشد.<input type="checkbox" class="form-control" id="paziresh" {% if loginData.paziresh %}checked="checked"{% endif %}></label>
                                            </fieldset>
                                        </div>
                                        <br/><br/><br/>

                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="javazKasb">جواز کسب </label>
                                                <input type="file" multiple class="form-control" accept="image/*"
                                                       id="javazKasb">
                                            </fieldset>
                                        </div>


                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="ejarehName">اجاره نامه </label>
                                                <input type="file" multiple class="form-control" accept="image/*"
                                                       id="ejarehName">
                                            </fieldset>
                                        </div>

                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="sanadMalek">سند مالکیت </label>
                                                <input type="file" multiple class="form-control" accept="image/*"
                                                       id="sanadMalek">
                                            </fieldset>
                                        </div>

                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="tsvirShenasnameh">تصویر دو صفحه اول شناسنامه </label>
                                                <input type="file" multiple class="form-control" accept="image/*"
                                                       id="tsvirShenasnameh">
                                            </fieldset>
                                        </div>

                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="rooyeCartmeli">تصویر روی کارت ملی </label>
                                                <input type="file" multiple class="form-control" accept="image/*"
                                                       id="rooyeCartmeli">
                                            </fieldset>
                                        </div>

                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="poshtCartmeli">تصویر پشت کارت ملی </label>
                                                <input type="file" multiple class="form-control" accept="image/*"
                                                       id="poshtCartmeli">
                                            </fieldset>
                                        </div>

                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="tsvirEmzaMohr">تصویر امضا و مهر </label>
                                                <input type="file" multiple class="form-control" accept="image/*"
                                                       id="tsvirEmzaMohr">
                                            </fieldset>
                                        </div>

                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="sabinFormFirst">تصویر صفحه اول فرم سابین </label>
                                                <input type="file" multiple class="form-control" accept="image/*"
                                                       id="sabinFormFirst">
                                            </fieldset>
                                        </div>

                                        <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="sabinFormTwo">تصویر صفحه دوم فرم سابین </label>
                                                <input type="file" multiple class="form-control" accept="image/*"
                                                       id="sabinFormTwo">
                                            </fieldset>
                                        </div>
                                        {% comment %}<div class="col-xl-12 col-lg-12 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="description">توضیحات</label>
                                                <textarea id="description" class="form-control" rows="5"></textarea>
                                            </fieldset>
                                        </div>{% endcomment %}

                                         <div class="col-xl-4 col-lg-6 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <label for="nameFamilyKarshenas">نام و نام خانوادگی کارشناس پذیرش </label>
                                                <input type="text" class="form-control" id="nameFamilyKarshenas" value="{{ loginData.nameFamilyKarshenas }}">
                                            </fieldset>
                                        </div>
                                        <hr />
                                        <hr />



                                        <div class="col-xl-12 col-lg-12 col-md-12 mb-1">
                                            <fieldset class="form-group">
                                                <br/>
                                                <button class="btn btn-success col-md-12" onclick="addData()">ذخیره اطلاعات</button>
                                            </fieldset>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

{% endblock %}


{% block js %}

    <script type="text/javascript">


    function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        var csrftoken = getCookie('csrftoken');




        function addData() {

            var name = $("#name").val().trim();
            var family = $("#family").val().trim();
            var fatherName = $("#fatherName").val();
            var birthday = $("#birthday").val();
            var codeMeli = $("#codeMeli").val();
            var serialMeli = $("#serialMeli").val();
            var shomareSh = $("#shomareSh").val();
            var serialSh = $("#serialSh").val();
            var seriSh = $("#seriSh").val();
            var sadereh = $("#sadereh").val();
            var ostan = $("#ostan").val();
            var shahr = $("#shahr").val();
            var neshaniShop = $("#neshaniShop").val();
            var codePosti = $("#codePosti").val();
            var telephonShop = $("#telephonShop").val();
            var shomareParvane = $("#shomareParvane").val();
            var codeRehgiri = $("#codeRehgiri").val();
            var senf = $("#senf").val();
            var teleHamrah = $("#teleHamrah").val();

            var bestareErtebat = $("#bestareErtebat").find("option:selected").val();
            var malekiyat = $("#malekiyat").find("option:selected").val();
            var mohlateEjareFrom = $("#mohlateEjareFrom").val();
            var mohlateEjareTo = $("#mohlateEjareTo").val();
            var nameMoaref = $("#nameMoaref").val();
            var familyMoaref = $("#familyMoaref").val();
            var telMoaref = $("#telMoaref").val();
            var neshaniMoaref = $("#neshaniMoaref").val();
            var shomareHesab = $("#shomareHesab").val();
            var nameBank = $("#nameBank").val();
            var shomareShaba = $("#shomareShaba").val();
            var shomareHesabTow = $("#shomareHesabTow").val();
            var nameBankTwo = $("#nameBankTwo").val();
            var shomareShabaTwo = $("#shomareShabaTwo").val();
            var nameFamilyKarshenas = $("#nameFamilyKarshenas").val();

            {#var displayed = $("#displayed").attr("checked") ? true : false;#}
            var paziresh = $("#paziresh");


            var javazKasb = document.getElementById("javazKasb").files[0];
            var ejarehName = document.getElementById("ejarehName").files[0];
            var sanadMalek = document.getElementById("sanadMalek").files[0];
            var tsvirShenasnameh = document.getElementById("tsvirShenasnameh").files[0];
            var rooyeCartmeli = document.getElementById("rooyeCartmeli").files[0];
            var poshtCartmeli = document.getElementById("poshtCartmeli").files[0];
            var tsvirEmzaMohr = document.getElementById("tsvirEmzaMohr").files[0];
            var sabinFormFirst = document.getElementById("sabinFormFirst").files[0];
            var sabinFormTwo = document.getElementById("sabinFormTwo").files[0];

            {#console.log(displayed.is(":checked"))#}

           {% comment %} if (productName === "" || brand === "" || price === "" || inventory === "") {
                Swal.fire({
                    icon: 'error',
                    title: 'خطا',
                    text: 'تمامی ایتم ها باید مقدار دهی شود!',
                    footer: '<a href="">Why do I have this issue?</a>'
                });
                return;
            }{% endcomment %}

            var formdata = new FormData();
            formdata.append('name', name);
            formdata.append('family', family);
            formdata.append('fatherName', fatherName);
            formdata.append('birthday', birthday);
            formdata.append('codeMeli', codeMeli);
            formdata.append('serialMeli', serialMeli);
            formdata.append('shomareSh', shomareSh);
            formdata.append('serialSh', serialSh);
            formdata.append('seriSh', seriSh);
            formdata.append('sadereh', sadereh);
            formdata.append('ostan', ostan);
            formdata.append('shahr', shahr);
            formdata.append('neshaniShop', neshaniShop);
            formdata.append('codePosti', codePosti);
            formdata.append('telephonShop', telephonShop);
            formdata.append('shomareParvane', shomareParvane);
            formdata.append('codeRehgiri', codeRehgiri);
            formdata.append('senf', senf);
            formdata.append('teleHamrah', teleHamrah);
            formdata.append('bestareErtebat', bestareErtebat);
            formdata.append('malekiyat', malekiyat);
            formdata.append('mohlateEjareFrom', mohlateEjareFrom);
            formdata.append('mohlateEjareTo', mohlateEjareTo);
            formdata.append('nameMoaref', nameMoaref);
            formdata.append('familyMoaref', familyMoaref);
            formdata.append('telMoaref', telMoaref);
            formdata.append('neshaniMoaref', neshaniMoaref);
            formdata.append('shomareHesab', shomareHesab);
            formdata.append('nameBank', nameBank);
            formdata.append('shomareShaba', shomareShaba);
            formdata.append('shomareHesabTow', shomareHesabTow);
            formdata.append('nameBankTwo', nameBankTwo);
            formdata.append('shomareShabaTwo', shomareShabaTwo);
            formdata.append('nameFamilyKarshenas', nameFamilyKarshenas);
            formdata.append('paziresh', paziresh.is(":checked"));
            formdata.append("javazKasb", javazKasb);
            formdata.append("ejarehName", ejarehName);
            formdata.append("sanadMalek", sanadMalek);
            formdata.append("tsvirShenasnameh", tsvirShenasnameh);
            formdata.append("rooyeCartmeli", rooyeCartmeli);
            formdata.append("poshtCartmeli", poshtCartmeli);
            formdata.append("tsvirEmzaMohr", tsvirEmzaMohr);
            formdata.append("sabinFormFirst", sabinFormFirst);
            formdata.append("sabinFormTwo", sabinFormTwo);




            swal.fire({
                title: 'ذخیره محصول',
                text: "آیا میخواهید محصول دخیره شود؟",
                icon: 'info',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'بله دخیره شود',
                cancelButtonText: 'خیر'
            }).then((result) => {
                if (result.value) {

                    $.ajax({
                        url: `/registerData`,
                        method: 'POST',
                        headers: {
                            //'Content-type': 'application/json',
                            //'X-CSRFToken': csrftoken,
                        },
                        processData: false,
                        contentType: false,
                        data: formdata,
                        success: function (data) {
                            console.log(data)
                            if (data['isSuccess'] === true) {
                                swal.fire(
                                    'موفق!',
                                    data['message'],
                                    'success'
                                ).then(function (isConfirm) {
                                    location.reload();
                                });

                            } else {

                                swal.fire(
                                    'هشدار!',
                                    data['message'],
                                    'warning'
                                );

                            }
                        },
                        error: function (request, status, error) {
                            alert(request.responseText);
                        }

                    });

                }
            })

        }


    </script>

{% endblock %}